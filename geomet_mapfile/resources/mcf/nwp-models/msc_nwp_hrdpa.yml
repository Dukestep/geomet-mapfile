%YAML 1.1
---
### Metadata Control File for the following dataset:
### Regional Deterministic Precipitation Analysis (RDPA)
### available on the MSC Datamart and MSC GeoMet
#
## Documentation about how this file is used:
# https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata
#
## Documentation about MCF syntax:
# https://github.com/geopython/pygeometa/blob/master/doc/MCF_Reference.md
#
## Important notes about this dataset:
# This is the MCF file for the RDPA dataset on the MSC Datamart and MSC GeoMet
#
# Alex's command:
# pygeometa generate-metadata --mcf=$HOME/dps/metadata/msc_nwp_rdpa.mcf --schema=iso19139-hnap --output msc_nwp_rdpa.xml
#
###

# pygeometa mcf info
mcf:
    version: 1.0

msc-open-data:
    contacts:
        - Franck Lespinas:
            role:
                # data stewards, documentation, production, development
                - data steward
            # for org, we need a stable nomenclature
            organization:
                branch: # MSC, S&T, CFSB
                division:
                section:
            email: franck.lespinas@canada.ca
            notes: main data steward for HRDPA, https://wiki.cmc.ec.gc.ca/wiki/CPOP/Liste_des_syst%C3%A8mes


# Inheriting contact information from main-contact.yml
base_mcf: ../shared/contact-main.yml

metadata:
    charset: utf8
    hierarchylevel: dataset
    # Identifier, see https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata/UUID , URL USED: http://dd.weather.gc.ca/analysis/precip/hrdpa/
    identifier: edaaf2de-5962-562f-9d39-66e7b898c846
    # Primary language of the record, metadata still supports multiple languages
    language: en
    language_alternate: fr
    # The following $date$ value is updated when pygeometa is ran
    datestamp: $date$
    # dataseturi is optional according to the HNAP Guidelines, but is mandatory for pygeometa
    #### Next line will be updated according once we to the MSC Data Taxonomy...
    dataseturi: urn:x-msc-smc:md:weather-meteo::nwp.hrdpa
    # parentidentifier is conditional to an existing higher level
    # parentidentifier=someparentid -> NO PARENT ID for the generic nwp.rdpa dataset

spatial:
    datatype: grid
    geomtype: solid
    crs: 4326
    # bounding box taken from GeoMet-1
    bbox: -130.1 42.2 -47.6 42.8

identification:
    charset: utf8
    # Primary language, metadata records are both in English and French when appropriate
    language: eng; CAN

    # Title source is: https://wiki.cmc.ec.gc.ca/wiki/CPOP/Liste_des_systemes
    title_en: High Resolution Deterministic Precipitation Analysis
    title_fr: Analyse à Haute Résolution Déterministe de Précipitation
    # Abstracts found on http://dd.meteo.gc.ca/analysis/precip/doc/hrdpa/README_HRDPA.txt
    abstract_en: The Canadian Precipitation Analysis System (CaPA) produces a best estimate of 6 and 24 hour precipitation amounts. This objective estimate integrates data from in situ precipitation gauge measurements, radar QPEs and a trial field generated by a numerical weather prediction system. In order to produce the High Resolution Deterministic Precipitation Analysis (HRDPA) at a resolution of 2.5 km, CaPA is connected to the continental HRDPS for its trial field. CaPA-HRDPA produces four analyses of 6 hour amounts per day, valid at synoptic hours (00, 06, 12 and 18 UTC) and one 24 hour analysis valid at 12 UTC. A preliminary production is started 1 hour after valid time and a final one is launched 6 hours later. This translates into a production of 10 analyses per day. The domain of the HRDPA is exactly the same as the HRDPS.
    abstract_fr: Le Système Canadien d'Analyse de Précipitation (CaPA) produit une estimation optimale de la précipitation sur des périodes de cumuls de 6 et 24 heures. Cet estimé objectif intègre des relevés pluviométriques provenant de capteurs de précipitation, de QPE radars et d'un champ d'essai généré par un système de prévision numérique du temps. Dans le but de produire l'Analyse à Haute Résolution Déterministe de Précipitation (AHRDP) à une résolution de 2.5 km, CaPA-AHRDP est connecté sur le SHRPD continental pour préparer son champ d'essai. CaPA produit quatre analyses de cumuls 6 heures valides aux heures synoptiques (00, 06, 12 et 18 UTC) et une analyse 24 heures valide à 12 UTC. Une production préliminaire est démarrée 1 heure après l'heure de validité et une autre, dite finale, est lancée 6 heures plus tard, ce qui revient à un total de 10 analyses par jour. Le domaine de l'AHRDP est exactement le même que celui du SHRPD.

    dates:
        # Next is the reference date for the cited resource (date from Vincent Fortin)
        creation: 2018-03-02
        # The following $date$ value is updated when pygeometa is ran
        publication: $date$

    keywords:
        default:
            # No non-CST keywords specified for this dataset
            keywords_en:
               - Quantity of precipitation
               - Analysis
            keywords_fr:
               - Quantité de précipitation
               - Analyse

        # A minimum of one gc_cst keyword from http://www.thesaurus.gc.ca/default.asp?lang=En&n=EAEAD1E6-1 is required
        gc_cst:
            # keywords_type is constrained by a list
            keywords_type: theme
            # For keywords, see https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata/Keywords
            keywords_en:
                - Forecasting
                - Precipitation
                - Meteorological data
                - Measurement
                - Radar
            keywords_fr:
                - Prévision
                - Précipitation
                - Données météorologiques
                - Mesure
                - Radar

        # Amongst the possible values from ECDC: Air, Air - Quality, Other, Pollution and Waste, Water, Weather and Climate   => French counterparts: Temps et climat
        hnap_category_information:
            keywords_en:
                - Weather and Climate
            keywords_fr:
                - Temps et climat
        # Amongst the possible values from ECDC: International  => French counterparts: Internationale
        hnap_category_geography:
            keywords_en:
                - International
            keywords_fr:
                - Internationale
        # Amongst the possible values from ECDC: Atmosphere => French counterparts: Atmosphère
        hnap_category_content:
            keywords_en:
                - Atmosphere
            keywords_fr:
                - Atmosphère

    # topiccategory value is constrained by a list, fixed to climatologyMeteorologyAtmosphere
    topiccategory:
        - climatologyMeteorologyAtmosphere

    fees: None
    accessconstraints: otherRestrictions
    rights_en: Open Government Licence - Canada (http://open.canada.ca/en/open-government-licence-canada)
    rights_fr: Licence du gouvernement ouvert - Canada (http://ouvert.canada.ca/fr/licence-du-gouvernement-ouvert-canada)

    # The next URL points to the html documentation, if any, otherwise, to the data source
    url_en: http://dd.meteo.gc.ca/analysis/precip/doc/hrdpa/README_HRDPA.txt
    url_fr: http://dd.meteo.gc.ca/analysis/precip/doc/hrdpa/README_HRDPA.txt

    # temporal_begin is mandatory, for ongoing datasets it is set to the day it first became available. (date from Vincent Fortin)
    temporal_begin: 2018-02-14
    temporal_end: now
    status: onGoing
    # Best fit amongst the possible options, see MCF_Reference.md
    maintenancefrequency: continual


distribution:
    waf_eng-CAN: &id_waf_eng-CAN
        base_mcf: ../shared/distribution-datamart.yml
        url: https://dd.weather.gc.ca/analysis/precip/hrdpa/
        format_en: GRIB2
        format_fr: GRIB2
        format_version: 2
    waf_fra-CAN:
        <<: *id_waf_eng-CAN
    wms_eng-CAN: &id_wms_eng-CAN
        base_mcf: ../shared/distribution-geomet.yml
        # Pointing to the global WMS GetCapabilities response
        url: https://geo.weather.gc.ca/geomet-beta/?lang=E&service=WMS&request=GetCapabilities
        # For WMS, name_en and name_fr point to the 'default layer' associated to the dataset, using final 6h precipitation accumulation (PR) as default
        name_en: HRDPA.6F_PR
        name_fr: HRDPA.6F_PR
    wms_fra-CAN:
        <<: *id_wms_eng-CAN
        url: https://geo.weather.gc.ca/geomet-beta/?lang=F&service=WMS&request=GetCapabilities
    amqps_eng-CAN: &id_amqps_eng-CAN
        base_mcf: ../shared/distribution-datamart-amqps.yml
        url: amqps://dd.weather.gc.ca/analysis.precip.hrdpa.grib2.#
        format_en: GRIB2
        format_fr: GRIB2
        format_version: 2
    amqps_fra-CAN:
        <<: *id_amqps_eng-CAN
