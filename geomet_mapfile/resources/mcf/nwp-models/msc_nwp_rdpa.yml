%YAML 1.1
---
### Metadata Control File for the following dataset:
### Regional Deterministic Precipitation Analysis (RDPA)
### available on the MSC Datamart and MSC GeoMet
#
## Documentation about how this file is used:
# https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata
#
## Documentation about MCF syntax:
# https://github.com/geopython/pygeometa/blob/master/doc/MCF_Reference.md
#
## Important notes about this dataset:
# This is the MCF file for the RDPA dataset on the MSC Datamart and MSC GeoMet
#
#
###

msc-metadata:
    phase: CCCS
    publish-to:
        - ECDC:
          url: http://donnees-data.intranet.ec.gc.ca/geonetwork/metadata/eng/fdd3446a-dc20-5bad-9755-0855e3ec9b19
        - open.canada.ca:
          url: https://open.canada.ca/data/en/dataset/fdd3446a-dc20-5bad-9755-0855e3ec9b19
    data_stewards:
        - name: Guy Roy
          status: confirmed
          email: guy.roy@canada.ca
          note: as of October 2018, in progressive retirement
        - name: Franck Lespinas
          status: unconfirmed
          email: franck.lespinas@canada.ca
          note: identified by Guy Roy in 2019-05 as his replacement contact point
        # Note: Nicolas Gasset and Dorothy Dunford confirmed they don't act as RDPA data stewards, as of 2018-10-02


# pygeometa mcf info
mcf:
    version: 1.0

# Inheriting contact information from main-contact.yml
base_mcf: ../shared/contact-main.yml

metadata:
    charset: utf8
    hierarchylevel: dataset
    # Identifier, see https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata/UUID , URL USED: http://dd.weather.gc.ca/analysis/precip/rdpa/
    identifier: fdd3446a-dc20-5bad-9755-0855e3ec9b19
    # Primary language of the record, metadata still supports multiple languages
    language: en
    language_alternate: fr
    # The following $date$ value is updated when pygeometa is ran
    datestamp: $date$
    # dataseturi is optional according to the HNAP Guidelines, but is mandatory for pygeometa
    #### Next line will be updated according once we to the MSC Data Taxonomy...
    dataseturi: urn:x-msc-smc:md:weather-meteo::nwp.rdpa
    # parentidentifier is conditional to an existing higher level
    # parentidentifier=someparentid -> NO PARENT ID for the generic nwp.rdpa dataset

spatial:
    datatype: grid
    geomtype: solid
    crs: 4326
    # bounding box taken from GeoMet-1
    bbox: -179, 28, -39, 80

identification:
    charset: utf8
    # Primary language, metadata records are both in English and French when appropriate
    language: eng; CAN

    # Title source is: https://wiki.cmc.ec.gc.ca/wiki/CPOP/Liste_des_systemes
    title_en: Regional Deterministic Precipitation Analysis
    title_fr: Analyse régionale déterministe de précipitation
    # Abstracts found on https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata/Descriptions#RDPA_.2F_ARDP
    abstract_en: The Regional Deterministic Precipitation Analysis (RDPA) produces a best estimate of the amount of precipitation that occurred over recent past periods of 6 or 24 hours. The estimate integrates data from in situ precipitation gauge measurements, weather radar and numerical weather prediction models. Geographic coverage is North America (Canada, United States and Mexico). Data is available at horizontal resolution of 10 km. Data is only available for the surface level. Analysis data is made available four times a day for 6h intervals and once a day for the 24h interval. A preliminary estimate is available approximately 1h after the end of the accumulation period, and revised 6h after in order to assimilate gauge data arriving later.
    abstract_fr: L'Analyse régionale déterministe de précipitation (ARPD) produit une estimation optimale de la quantité de précipitation qui est survenue au cours de périodes passées récentes de 6h ou 24h. Cet estimé intègre des relevés provenant de capteurs de précipitation, de radar météo et de modèles de prévision numérique du temps. La couverture géographique est l'Amérique du Nord (Canada, États-Unis et le Mexique). Les données sont disponibles à une résolution spatiale horizontale de 10 km. Les données ne sont disponibles qu'au niveau de la surface. Les données d'analyse sont rendues disponibles quatre fois par jour pour les intervalles de 6h et une fois par jour pour l'intervalle de 24h. Un estimé préliminaire est disponible environ 1h après la fin de la période d'accumulation, et révisé 6h plus tard afin d'assimiler les pluviomètres dont les données furent disponibles tardivement.

    dates:
        # Next is the reference date for the cited resource
        creation: 2011-04-06
        # The following $date$ value is updated when pygeometa is ran
        publication: $date$

    keywords:
        default:
            # No non-CST keywords specified for this dataset
            keywords_en:
               - Quantity of precipitation
               - Analysis
            keywords_fr:
               - Quantité de précipitation
               - Analyse

        # A minimum of one gc_cst keyword from http://www.thesaurus.gc.ca/default.asp?lang=En&n=EAEAD1E6-1 is required
        gc_cst:
            # keywords_type is constrained by a list
            keywords_type: theme
            # For keywords, see https://wiki.cmc.ec.gc.ca/wiki/DPS/Metadata/Keywords
            keywords_en:
                - Forecasting
                - Precipitation
                - Meteorological data
                - Measurement
                - Radar
            keywords_fr:
                - Prévision
                - Précipitation
                - Données météorologiques
                - Mesure
                - Radar

        # Amongst the possible values from ECDC: Air, Air - Quality, Other, Pollution and Waste, Water, Weather and Climate   => French counterparts: Temps et climat
        hnap_category_information:
            keywords_en:
                - Weather and Climate
            keywords_fr:
                - Temps et climat
        # Amongst the possible values from ECDC: International  => French counterparts: Internationale
        hnap_category_geography:
            keywords_en:
                - International
            keywords_fr:
                - Internationale
        # Amongst the possible values from ECDC: Atmosphere => French counterparts: Atmosphère
        hnap_category_content:
            keywords_en:
                - Atmosphere
            keywords_fr:
                - Atmosphère

    # topiccategory value is constrained by a list, fixed to climatologyMeteorologyAtmosphere
    topiccategory:
        - climatologyMeteorologyAtmosphere

    fees: None
    accessconstraints: otherRestrictions
    rights_en: Open Government Licence - Canada (http://open.canada.ca/en/open-government-licence-canada)
    rights_fr: Licence du gouvernement ouvert - Canada (http://ouvert.canada.ca/fr/licence-du-gouvernement-ouvert-canada)

    # The next URL points to the html documentation, if any, otherwise, to the data source
    url_en: http://weather.gc.ca/grib/grib2_RDPA_ps10km_e.html
    url_fr: http://meteo.gc.ca/grib/grib2_RDPA_ps10km_f.html

    # temporal_begin is mandatory, for ongoing datasets it is set to the day it first became available
    temporal_begin: 2011-04-06
    temporal_end: now
    status: onGoing
    # Best fit amongst the possible options, see MCF_Reference.md
    maintenancefrequency: continual


distribution:
    waf_eng-CAN: &id_waf_eng-CAN
        base_mcf: ../shared/distribution-datamart.yml
        url: https://dd.weather.gc.ca/analysis/precip/rdpa/
        format_en: GRIB2
        format_fr: GRIB2
        format_version: 2
    waf_fra-CAN:
        <<: *id_waf_eng-CAN
    waf-archive_eng-CAN: &id_waf-archive_eng-CAN
        type: WWW:LINK
        name_en: Collaboration
        name_fr: Collaboration
        description_en: The Meteorological Service of Canada makes certain weather and forecast data of a less time-sensitive nature available to specialized users on its Collaboration server (http://collaboration.cmc.ec.gc.ca/). Users wishing to access this data should have a good knowledge of meteorology in order to make the best use of it. The preferred access mode is via automatic access routines (scripts).
        description_fr: Le Service météorologique du Canada met à la disposition des usagers spécialisés certaines données météorologiques et prévisonnelles pour lesquelles le facteur temps est moins critique sur son serveur Collaboration (http://collaboration.cmc.ec.gc.ca/). Les usagers qui désirent accéder à ces données devraient avoir une bonne connaissance de la météorologie afin d'en faire bon usage. Le mode d'accès privilégié est via des routines d'accès automatiques (scripts).
        function: download
        hnap_contenttype_en: Dataset
        hnap_contenttype_fr: Données
        url: https://collaboration.cmc.ec.gc.ca/science/outgoing/capa.grib/
        format_en: GRIB2
        format_fr: GRIB2
        format_version: 2
    waf-archive_fra-CAN:
        <<: *id_waf-archive_eng-CAN
    wms_eng-CAN: &id_wms_eng-CAN
        base_mcf: ../shared/distribution-geomet.yml
        # Pointing to the global WMS GetCapabilities response
        url: https://geo.weather.gc.ca/geomet/?lang=E&service=WMS&request=GetCapabilities
        # For WMS, name_en and name_fr point to the 'default layer' associated to the dataset, using final 6h precipitation accumulation (PR) as default
        name_en: RDPA.6F_PR
        name_fr: RDPA.6F_PR
    wms_fra-CAN:
        <<: *id_wms_eng-CAN
        url: https://geo.weather.gc.ca/geomet/?lang=F&service=WMS&request=GetCapabilities
    amqps_eng-CAN: &id_amqps_eng-CAN
        base_mcf: ../shared/distribution-datamart-amqps.yml
        url: amqps://dd.weather.gc.ca/analysis.precip.rdpa.grib2.#
        format_en: GRIB2
        format_fr: GRIB2
        format_version: 2
    amqps_fra-CAN:
        <<: *id_amqps_eng-CAN
